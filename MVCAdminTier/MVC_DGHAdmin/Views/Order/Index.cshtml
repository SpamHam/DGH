@model IEnumerable<BLLGateway.DTOModels.OrderModelDTO>

@{
    ViewBag.Title = "Orders";
}

<h2>Orders</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
<thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.CustomerName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Shipping)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.sumShipping)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.OrderDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.shippedDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SumPurchase)
        </th>
        <th>
        </th>
    </tr>
</thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.CustomerName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Shipping)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.sumShipping)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.OrderDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.shippedDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SumPurchase)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.id }) |
                    @Html.ActionLink("Details", "Details", new { id = item.id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.id })
                </td>
            </tr>
        <table class="table">
        <thead>
            <tr>
                <th>
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.OrderLine.FirstOrDefault().ProductName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.OrderLine.FirstOrDefault().ProductPrice)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.OrderLine.FirstOrDefault().Amount)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.OrderLine.FirstOrDefault().LineTotal)
                </th>
                <th>
                </th>
            </tr>
        </thead>
            <tbody>
                @foreach (var lineItem in item.OrderLine)
                {
                    <tr>
                        <th>
                        </th>
                        <td>
                            @Html.DisplayFor(modelItem => lineItem.ProductName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => lineItem.ProductPrice)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => lineItem.Amount)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => lineItem.LineTotal)
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id = lineItem.id }) |
                            @Html.ActionLink("Details", "Details", new { id = lineItem.id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = lineItem.id })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
            }
        </tbody>
</table>